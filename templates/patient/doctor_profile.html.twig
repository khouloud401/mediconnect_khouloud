{% extends 'base.html.twig' %}

{% block title %}Profil Dr. {{ doctor.fullName }} - MediConnect{% endblock %}

{% block body %}
    <style>
        :root {
            --accent-color: #4facfe;
            --glass-white: rgba(255, 255, 255, 0.9);
            --text-dark: #1e293b;
            --star-color: #ffc107;
        }

        body {
            background: url("{{ asset('images/image8.jpg') }}") no-repeat center center fixed;
            background-size: cover;
            margin: 0;
            padding: 0;
            min-height: 100vh;
            font-family: 'Poppins', sans-serif;
            color: var(--text-dark);
        }

        .dashboard-wrapper {
            padding: 60px 0;
            min-height: 100vh;
            display: flex;
            align-items: center;
        }

        /* Carte Profil Bento */
        .profile-card {
            background: var(--glass-white);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.4);
            border-radius: 30px;
            padding: 40px;
            box-shadow: 0 25px 50px rgba(0,0,0,0.15);
            width: 100%;
        }

        /* Icone Docteur Géante */
        .doctor-avatar-large {
            width: 120px;
            height: 120px;
            background: white;
            color: var(--accent-color);
            border-radius: 25px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4rem; /* Icône très grande */
            margin: 0 auto 20px auto;
            box-shadow: 0 10px 20px rgba(0,0,0,0.05);
            border: 2px solid #f0f4f8;
        }

        .rating-badge {
            background: #fff9db;
            color: #f08c00;
            padding: 8px 16px;
            border-radius: 50px;
            font-weight: 700;
            display: inline-flex;
            align-items: center;
            gap: 5px;
            margin-bottom: 15px;
        }

        .info-label {
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: #94a3b8;
            font-weight: 700;
            margin-bottom: 2px;
        }

        .info-value {
            font-weight: 600;
            margin-bottom: 15px;
            color: var(--text-dark);
        }

        .description-box {
            background: rgba(255, 255, 255, 0.5);
            padding: 20px;
            border-radius: 20px;
            margin-top: 20px;
            border: 1px dashed rgba(79, 172, 254, 0.3);
        }

        /* Bouton Prendre RDV */
        .btn-book {
            background: var(--accent-color);
            color: white;
            border: none;
            padding: 18px;
            border-radius: 20px;
            width: 100%;
            font-weight: 700;
            font-size: 1.1rem;
            margin-top: 25px;
            transition: 0.3s;
            box-shadow: 0 10px 20px rgba(79, 172, 254, 0.3);
            text-decoration: none;
            display: block;
            text-align: center;
        }

        .btn-book:hover {
            filter: brightness(1.1);
            transform: translateY(-3px);
            color: white;
        }

        /* Flèche retour */
        .back-arrow {
            position: fixed;
            top: 25px;
            left: 25px;
            color: white;
            font-size: 2rem;
            z-index: 1000;
            text-shadow: 0 2px 10px rgba(0,0,0,0.5);
        }

        footer { display: none !important; }
    </style>

    <a href="javascript:history.back()" class="back-arrow">
        <i class="bi bi-arrow-left"></i>
    </a>

    <div class="dashboard-wrapper">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-md-10 col-lg-6">

                    <div class="profile-card text-center">
                        <div class="doctor-avatar-large">
                            <i class="bi bi-person-badge"></i>
                        </div>

                        <h2 class="fw-bold mb-1">Dr. {{ doctor.fullName }}</h2>

                        <div class="rating-badge shadow-sm mx-auto">
                            <i class="bi bi-star-fill"></i>
                            {{ doctor.averageRating is not null ? doctor.averageRating|number_format(1) : '0.0' }} / 5
                        </div>

                        <hr class="my-4 opacity-25">

                        <div class="row text-start">
                            <div class="col-sm-6">
                                <p class="info-label">Spécialité</p>
                                <p class="info-value"><i class="bi bi-patch-check text-primary me-2"></i>{{ doctor.specialty.name ?? 'Généraliste' }}</p>
                            </div>
                            <div class="col-sm-6">
                                <p class="info-label">Ville</p>
                                <p class="info-value"><i class="bi bi-geo-alt text-danger me-2"></i>{{ doctor.city ?? 'Non précisée' }}</p>
                            </div>
                            <div class="col-12">
                                <p class="info-label">Adresse du cabinet</p>
                                <p class="info-value"><i class="bi bi-building text-muted me-2"></i>{{ doctor.address ?? 'Contactez le cabinet' }}</p>
                            </div>
                        </div>

                        <div class="description-box text-start">
                            <p class="info-label">À propos</p>
                            <p class="m-0 text-muted small" style="line-height: 1.6;">
                                {{ doctor.description ?? 'Ce médecin n\'a pas encore ajouté de description détaillée.' }}
                            </p>
                        </div>

                        <a href="{{ path('patient_book_appointment', {id: doctor.id}) }}" class="btn-book">
                            <i class="bi bi-calendar-plus me-2"></i> Prendre rendez-vous
                        </a>
                    </div>

                </div>
            </div>
        </div>
    </div>
{% endblock %}